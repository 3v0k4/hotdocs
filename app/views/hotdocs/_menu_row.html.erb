<%# locals: (label:, url:, expanded: false) -%>

<%= content_tag :div, class: "menu__row", data: { "controller": "accordion", "accordion-expanded-class-value": "menu__row--expanded", "accordion-expanded-value": expanded, "accordion-collapsed-aria-label-value": "Expand menu row '#{label}'", "accordion-expanded-aria-label-value": "Collapse menu row '#{label}'" } do %>
  <%= active_link_to label, url, class: "menu__link" if !url.nil? && !external_url?(url) %>
  <%= external_link_to label, url, class: "menu__link" if !url.nil? && external_url?(url) %>

  <%= content_tag :button, type: "button", class: class_names("menu__toggle", "menu__toggle--full": url.nil?), data: { action: "click->accordion#toggle", "accordion-target": "toggle" } do %>
    <%= content_tag :span, label, class: "menu__link" if url.nil? %>

    <svg class="menu__toggle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path>
    </svg>
  <% end %>
<% end %>
